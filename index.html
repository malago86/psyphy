<head>
<title>PSY&#9898;PHY - Online psychophysics experiments for all</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="js/functions.js"></script>
<script src="js/main.js"></script>
<script src="js/google_drive.js"></script>
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="../fontawesome/css/all.css" rel="stylesheet"> 
</head>
<body>
    <div class="background">
        <div id="form-container">
            <img src="images/psyphy.png" class="logo" width="600" style="   margin:20px;">
            
            <p><strong>Try the test experiment: </strong>Enter your name and click on Start. Calibration will start first.</p>
            <p><strong>Load your experiment:</strong> Upload an experiment file to load experiment configuration. <br>Enter your name and click on Start. Calibration will start first.</p>
            <div class="credits">Developed by <a href="mailto:lago@psych.ucsb.edu">Miguel Lago</a><br>
                for <a href="https://viu.psych.ucsb.edu" target="_blank">VIU lab at UCSB</a>
                <br>
                version <a id="version" href="https://gitlab.com/malago/psychonline" target="_blank"></a>
            </div> 
            
            <input id="name" type="text" placeholder="Name" value="" />
            <!--Screen size (<span class="question-mark">&#10067;</span>): <input id="width" type="text" placeholder="width" value="23" /> by <input id="height" type="text" placeholder="height" value="13" /> 
            <select id="units">
                <option>inches</option>
                <option>cm</option>
            </select>-->
            
            
            <input type="button" id="start-experiment" value="Start!" />
            <br>
            <label id="load-experiment-label" for="load-experiment">Upload experiment file</label>
            
            <input type="file" accept=".pso" id="load-experiment" value="Upload experiment file" style="font-size:14px; height:17px;line-height: 0px;"/>
            
            
            
            <form class="form-box" id="form-box">
                <p style="font-weight: bold;
                border-bottom: 2px solid white;
                margin: auto;
                margin-bottom: 15px;
                width: 80%;">Create experiment file</p>
                <table>
                    <tr>
                        <th>Title</th>
                        <td><input id="title" type="text" style="font-size:20px; width:100%;text-align:center" placeholder="optional"/></td>
                    </tr>
                    <tr>
                        <th>Instructions URL</th>
                        <td><input id="instructions" type="text" placeholder="optional" style="font-size:20px; width:100%;text-align:center"/></td>
                    </tr>
                    <tr>
                        <th># ratings</th>
                        <td>
                            <div id="slider-value">8</div>
                            <div class="slidecontainer">
                                <input type="range" min="2" max="10" value="8" class="slider" id="ratings">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th>Marks</th>
                        <td><input id="mark" type="checkbox" style="font-size:20px; width:100%;text-align:center" value="false"/></td>
                    </tr>
                    <tr>
                        <th>Trial timeout (<abbr title="milliseconds, set to empty or 0 to disable">ms</abbr>)</th>
                        <td><input id="timeout" type="text" placeholder="optional" style="font-size:20px; width:100%;text-align:center"/></td>
                    </tr>
                </table>
                <br><input type="button" id="google-drive-select" value="Find stimuli on Google Drive" style="font-size:14px; height:17px;line-height: 0px;"/><br>
                <input type="button" id="create-experiment" value="Download experiment config" style="font-size:14px; height:17px;line-height: 0px;" class="disabled"/>
            </form>
                
        </div>
        <div id="loading-bar">
            <div id="loading-bar-text">Loading... <i class="fas fa-spinner fa-spin"></i></div>
            <div id="loading-bar-progress"></div>
        </div>

        <div id="trial-container">
            <div class="text"><div>Find the signal in the image. Use the mouse wheel or drag the scrollbar to change the slice<br><br>
            Press ESC to quit the experiment, data will be lost<br><br>
            Press SPACEBAR to continue</div></div>
            <div id="stimulus-slice">Slice: 1</div>
            <div id="stimulus-container">
                <div id="stimulus">
                    <img id="stimulus-img">
                </div>
                <div id="stimulus-scroll-bar">
                    <div id="stimulus-scroll-background"></div>
                    <div id="stimulus-scroll-position"></div>
                </div>
            </div>
            <div class="instructions">Press SPACEBAR to continue</div>
        </div>

        <div id="response-container">
            <span>
                <div id="response-text"></div>
                <div id="confidence-scale">
                    <div class="rating absent" num="1">1</div>
                    <div class="rating present" num="2">2</div>
                </div>
            </span>
        </div>

        <div id="finished-container">
            <div class="instructions" style="margin-top:100px">
                <p>You finished all the trials, your data has been uploaded!</p>
                <p>Thanks for participating, <a href=".">click here to go back</a>.</p>
            </div>
        </div>

        <div id="help" class="form-box">
            <p id="resolution"></p>
            <p id="monitor-size"></p>
            <p id="image-size"></p>
            <p id="image-real-size"></p>
            <p id="distance-required"></p>
        </div>

        <div class="popup" id="help-screen">
            <p></p>
            <img src="images/screen-measurement.png" height="300">
            <p>Measure your screen in cm or inches.</p>
            <p>Do not measure the screen border, only the interior of the display.</p>
            <div class="close">&#10060;</div>
        </div>
    </div>

    <div id="calibration" class="popup">
        <div class="close">&#10060;</div>
        <div id="calibration-step1">
            <p>Place a credit card in the top left corner of the square.</p>
            <p>Adjust the slider to match the size of your credit card in the screen.</p>
            <p style="font-size: 12px;
            bottom: 0;
            position: absolute;
            left: 0;
            width: 50%;
            margin: 10px;">Li, Q., Joo, S.J., Yeatman, J.D. et al. Controlling for Participants' Viewing Distance in Large-Scale, Psychophysical Online Experiments Using a Virtual Chinrest. Sci Rep 10, 904 (2020). <a href="https://doi.org/10.1038/s41598-019-57204-1" target="_blank">doi:10.1038/s41598-019-57204-1</a></p>
            <div class="credit-card-slider">
                <div class="credit-card-slider-position"></div>
            </div>
            <div class="credit-card-outline"></div>
            <div class="button">Continue</div>
        </div>
        <div id="calibration-step2" style="display:none">
            <p>Close your <strong>RIGHT eye</strong> and look at the cross.</p>
            <p>Without moving your eyes, press SPACEBAR when the white dot dissapears from your sight.</p>
            <div class="blind-spot-container">
                <div class="blind-spot-cross"></div>
                <div class="blind-spot-dot"></div>
            </div>
        </div>
        <div id="calibration-step3" style="display:none">
            <h1>Calibration succeded, <strong>do not move your head</strong> or adjust your body position. <br>
            You can start the experiment.</h1>
            <div class="button">Finish</div>
        </div>    
    </div>

    <div class="popup" id="google-drive-dialog">
        <div class="close">&#10060;</div>
        <p>Introduce the Google Drive Folder ID: <input id="google-drive-url" type="text" placeholder="https://..." 
            style="font-size:20px; width:90%;text-align:center" value="https://drive.google.com/drive/u/2/folders/1V4HE0d5cpIde595gTPj7qv4jseUjklsk"/>
        <p><input type="button" id="google-drive-submit" value="Find files" /></p>
        <div id="google-drive-result"></div>
        <div class="button">Finish</div>
    </div>
</body>